# Choosing the Best Database

## Overview
In this document, we will evaluate and select the best database type for storing IoT data in our project. We will compare Time-Series Databases, NoSQL Databases, and Relational Databases based on our project requirements and criteria.

## Project Requirements
- **Data Type**: Describe the types of data generated by IoT devices (e.g., time-series data, structured data, semi-structured data).
- **Data Volume**: Estimate the expected volume of data generated by IoT devices.
- **Query Performance**: Assess the performance requirements for querying and analyzing data.
- **Scalability**: Evaluate the scalability needs to accommodate future growth in data volume and device count.
- **Data Model**: Consider the structure and complexity of the data model required for storing and querying data.
- **Integration**: Identify any integration requirements with other components of the IoT platform or existing systems.
- **Budget**: Consider budget constraints for licensing, infrastructure, and ongoing maintenance.

## Database Options
1. **Time-Series Databases**
2. **NoSQL Databases**
3. **Relational Databases**

## Evaluation Criteria
1. **Performance**: Evaluate the query performance and throughput of each database type under expected data volumes and ingestion rates.
2. **Scalability**: Assess the scalability features and capabilities of each database type to accommodate growth in data volume and device count.
3. **Data Model**: Examine the suitability of each database type's data model for storing and querying the types of data generated by IoT devices.
4. **Integration**: Consider the ease of integration with other components of the IoT platform, including data ingestion pipelines, analytics tools, and visualization dashboards.
5. **Community and Support**: Evaluate the community size, documentation quality, and availability of support resources (e.g., forums, documentation, tutorials) for each database type.
6. **Cost**: Compare the licensing fees, cloud hosting costs, and ongoing maintenance expenses associated with each database type.

## Decision Criteria
- **Performance**: Database types with high query performance and throughput will be preferred, especially under expected data volumes and ingestion rates.
- **Scalability**: The selected database type should offer robust scalability features to accommodate future growth in data volume and device count.
- **Data Model**: Choose a database type with a data model that aligns well with the structure and complexity of the data generated by IoT devices.
- **Integration**: The database type should integrate seamlessly with other components of our IoT platform, minimizing integration effort and complexity.
- **Community and Support**: A vibrant community and comprehensive support resources will ensure timely assistance and guidance for troubleshooting and optimization.
- **Cost**: Consider the total cost of ownership, including licensing fees, infrastructure costs, and ongoing maintenance expenses, to ensure alignment with budget constraints.


# Pros and Cons of Database Types for IoT Projects

## Time-Series Databases:

**Pros:**
- Optimized for Time-Series Data: Specifically designed to efficiently store and query time-stamped data, making them ideal for IoT applications.
- High Performance: Offers optimized query performance and throughput for time-series data analytics and monitoring.
- Scalability: Provides robust scalability features to accommodate growing volumes of time-series data and increasing numbers of IoT devices.
- Specialized Query Capabilities: Supports specialized query languages and analytics functions tailored for time-series data analysis.
- Retention Policies: Includes features for defining retention policies to manage the lifecycle of data efficiently.

**Cons:**
- Limited Flexibility: May be less flexible for storing non-time-series data or handling complex data relationships compared to other database types.
- Narrow Use Case: Primarily suited for applications focused on time-series data analysis, may not be suitable for storing other types of data.

## NoSQL Databases:

**Pros:**
- Flexible Schema: Supports flexible schemas, allowing for dynamic and evolving data models, suitable for handling diverse types of data.
- Scalability: Offers horizontal scalability and fault tolerance, making it suitable for large-scale IoT deployments.
- High Performance: Can handle high throughput and concurrent writes, making them suitable for real-time data ingestion and processing.
- Accommodates Unstructured Data: Can accommodate unstructured or semi-structured data formats common in IoT applications.

**Cons:**
- Consistency Challenges: May lack strong consistency guarantees compared to relational databases, requiring additional effort to manage data integrity.
- Limited Query Capabilities: Querying capabilities may not be as advanced as specialized time-series databases for time-series data analytics.

## Relational Databases:

**Pros:**
- ACID Transactions: Offers strong consistency and ACID properties, suitable for applications with complex transactional requirements.
- Advanced Querying: Supports advanced SQL querying capabilities for complex analytics and reporting.
- Data Integrity: Provides mechanisms for enforcing data integrity constraints (e.g., foreign keys, constraints), ensuring data consistency and accuracy.
- Mature Ecosystem: Well-established technology with a mature ecosystem and tooling support.

**Cons:**
- Scalability Challenges: May require additional effort for scaling out and handling large volumes of IoT data compared to NoSQL databases.
- Limited Flexibility: Relational databases may be less flexible for handling semi-structured or unstructured data common in IoT applications.
-----
## Decision: 
### Choose Time-Series Databases for store income data from devices

Based on the evaluation of the pros and cons of each database type, and considering the specific requirements of our project, we choose Time-Series Databases for efficient storage and analysis of time-stamped IoT data. Time-Series Databases offer optimized performance, scalability, and specialized query capabilities tailored for IoT applications.

### Choose SQL Databases for application data
Based on the evaluation of the pros and cons of each database type, and considering the specific requirements of our project, we choose SQL Databases for efficient storage and analysis of Apllication  data such as users data, templates and devices. SQL Databases offer Relationships, Transactions, Data Integrity Constraints and etc.


# SQL TABLES

## USER TABLE

| Column Name | Data Type    | Description                              |
|-------------|--------------|------------------------------------------|
| id          | Integer      | Primary key, auto-incrementing           |
| username    | Varchar(100) | Username of the user                     |
| email       | Varchar(100) | Email address of the user                |
| password    | Varchar(100) | Hashed password of the user              |
| first_name  | Varchar(100) | First name of the user                   |
| last_name   | Varchar(100) | Last name of the user                    |
| date_joined | Timestamp    | Date and time when the user account was created |


## TEMPLATE TABLE

| Column Name   | Data Type  | Description                                                     |
|---------------|------------|-----------------------------------------------------------------|
| template_id   | Primary Key| Unique identifier for the template model                        |
| template_name | VARCHAR    | Name or label for the template model                            |
| description   | TEXT       | Description of the template model and its purpose               |
| owner_id      | Foreign Key| References the user_id from the User table, indicating the owner of the template |
| created_at    | TIMESTAMP  | Timestamp indicating when the template model was created        |
| updated_at    | TIMESTAMP  | Timestamp indicating when the template model was last updated   |


## DEVICE TABLE

| Column Name | Data Type  | Description                                                  |
|-------------|------------|--------------------------------------------------------------|
| device_id   | Primary Key| Unique identifier for the device                              |
| device_name | VARCHAR    | Name or label for the device                                  |
| device_type | VARCHAR    | Type or category of the device (e.g., sensor, actuator)       |
| owner_id    | Foreign Key| References the user_id from the User table, indicating the owner of the device |
| location    | VARCHAR    | Location or placement of the device                           |
| status      | VARCHAR    | Current status of the device (e.g., online, offline)          |
| created_at  | TIMESTAMP  | Timestamp indicating when the device was registered           |
| updated_at  | TIMESTAMP  | Timestamp indicating when the device information was last updated |

## Device_Template_Association TABLE

| Column Name | Data Type  | Description                                                                  |
|-------------|------------|------------------------------------------------------------------------------|
| device_id   | Foreign Key| References the device_id from the Devices table, indicating the device associated with the template model |
| template_id | Foreign Key| References the template_id from the Template Model table, indicating the template model to which the device belongs |
